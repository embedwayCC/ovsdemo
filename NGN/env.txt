cmake_minimum_required(VERSION 2.8)

set(INC_DIR ${INC_DIR}
        ${PROJECT_SOURCE_DIR}/include/
        ${PROJECT_SOURCE_DIR}/lib/platform/x86/lib/czmq/include/
        ${PROJECT_SOURCE_DIR}/lib/platform/x86/lib/zeromq/include/
        ${PROJECT_SOURCE_DIR}/ngn_interface/include/
        ${PROJECT_SOURCE_DIR}/broker/include/
        ${PROJECT_SOURCE_DIR}/lib/mpack/include/
        ${PROJECT_SOURCE_DIR}/lib/sde/include/
        ${PROJECT_SOURCE_DIR}/debug_cli/include/
        ${PROJECT_SOURCE_DIR}/msgpk_tools/include/
        ${PROJECT_SOURCE_DIR}/lib/lmdb/x86/include/
        ${PROJECT_SOURCE_DIR}/worker/include/
        ${PROJECT_SOURCE_DIR}/worker/srv_core/include/
        ${PROJECT_SOURCE_DIR}/worker/system_worker/
        ${PROJECT_SOURCE_DIR}/worker/srvapi/
	${PROJECT_SOURCE_DIR}/lib/imatrix/include/
	${PROJECT_SOURCE_DIR}/lib/cliportmap/portmap/include
	${PROJECT_SOURCE_DIR}/lib/sfp/include/
	${PROJECT_SOURCE_DIR}/client/
	${PROJECT_SOURCE_DIR}/client/include/
	${PROJECT_SOURCE_DIR}/lib/readline/include/)

if(SW STREQUAL "BCM56960") 
	add_definitions(-DSW_BCM_56960)
elseif(SW STREQUAL "BCM5684X") 
	add_definitions(-DSW_BCM_5684X)
else()
	add_definitions(-DSW_BCM_56960)
endif()

if(PF STREQUAL "x86")
	set(CROSS_COMPILE_HOST )
        set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib/x86)
        set(CMAKE_INSTALL_PREFIX ${PROJECT_SOURCE_DIR}/lib/x86)
        set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin/x86)
	set(LIB_DIR ${LIB_DIR}
	    ${PROJECT_SOURCE_DIR}/lib/mpack/x86/
        ${PROJECT_SOURCE_DIR}/lib/interface/x86/
        ${PROJECT_SOURCE_DIR}/lib/platform/x86/lib/czmq/lib/
        ${PROJECT_SOURCE_DIR}/lib/platform/x86/lib/zeromq/lib/
        ${PROJECT_SOURCE_DIR}/lib/x86/
        ${PROJECT_SOURCE_DIR}/lib/sde/lib/
        ${PROJECT_SOURCE_DIR}/lib/imatrix/hostlib64
        ${PROJECT_SOURCE_DIR}/lib/cliportmap/portmap/hostlib64
        ${PROJECT_SOURCE_DIR}/lib/sfp/hostlib64
		)
else()
        set(CMAKE_C_COMPILER mips64-octeon-linux-gnu-gcc)
       	set(CROSS_COMPILE_HOST mips64-octeon-linux-gnu)
        set(CMAKE_CXX_COMPILER mips64-octeon-linux-gnu-gcc)
	set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib/mips)
        set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin/mips)
	set(LIB_DIR ${LIB_DIR}
        ${PROJECT_SOURCE_DIR}/lib/mpack/mips/
        ${PROJECT_SOURCE_DIR}/lib/interface/mips/
        ${PROJECT_SOURCE_DIR}/lib/platform/mips/lib/czmq/lib/
        ${PROJECT_SOURCE_DIR}/lib/platform/mips/lib/zeromq/lib/
        ${PROJECT_SOURCE_DIR}/lib/mips/
        ${PROJECT_SOURCE_DIR}/lib/imatrix/mipslib/
        ${PROJECT_SOURCE_DIR}/lib/cliportmap/portmap/mipslib/
        ${PROJECT_SOURCE_DIR}/lib/sfp/mipslib/
		${PROJECT_SOURCE_DIR}/lib/readline/mipslib/
        )        

endif()

set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM BOTH)
set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE BOTH)

if(NOT CMAKE_BUILD_TYPE)
        message(STATUS "Set RelWithDebInfo build as default")
        set(CMAKE_BUILD_TYPE RelWithDebInfo CACHE STRING "Build types are: Debug,Release, MinSizeRel, RelWithDebInfo" FORCE)
endif()

set(CMAKE_C_FLAGS_RELEASE "-O2")
set(CMAKE_C_FLAGS_DEBUG "-O0 -g -Wall -rdynamic -fexceptions")
set(CMAKE_C_FLAGS_RELWITHDEBINFO "-O2 -g")
set(CMAKE_C_OUTPUT_EXTENSION_REPLACE 1)

